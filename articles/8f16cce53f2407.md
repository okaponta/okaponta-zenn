---
title: "Zennå•ç­”ç¬¬17å›ã€ŒTanStack Queryã€(å…¥é–€)"
emoji: "ğŸ”"
type: "tech"
topics: ["react", "tanstackquery", "redux", "javascript", "frontend"]
published: true
---

# Zennå•ç­”ã¨ã¯

ã€ŒZennå•ç­”ã€ã¨ã¯ã€é–‹ç™ºã—ã¦ã„ã¦ã€Œãªã‚“ã¨ãªãä½¿ã£ã¦ã‚‹ã‘ã©ã€ã¡ã‚ƒã‚“ã¨ç†è§£ã—ã¦ã‚‹ã‹ãªï¼Ÿã€ã¨ã„ã†æŠ€è¡“ã«ã¤ã„ã¦ã€æ”¹ã‚ã¦æ™‚é–“ã‚’ã¨ã£ã¦æ·±æ˜ã‚Šã—ã¦ã¿ã‚ˆã†ã¨ã„ã†ä¼ç”»ã§ã™ğŸ§˜ğŸ§˜ğŸ§˜

# ã¯ã˜ã‚ã«

Reacté–‹ç™ºã‚’ã—ã¦ã„ã‚‹ã¨ã€ã€ŒTanStack Queryã€ã¨ã„ã†åå‰ã‚’è€³ã«ã™ã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚ä»¥å‰ã¯ã€ŒReact Queryã€ã¨ã„ã†åå‰ã§ã—ãŸã€‚

ã€Œã‚µãƒ¼ãƒãƒ¼ã‚¹ãƒ†ãƒ¼ãƒˆç®¡ç†ã«ä¾¿åˆ©ã€ã€ŒReduxã‚ˆã‚Šç°¡å˜ã€ãªã©ã¨è¨€ã‚ã‚Œã¦ã„ã¾ã™ãŒã€å®Ÿéš›ã«Reduxã¨ã©ã†é•ã£ã¦ã©ã†ã„ã†ãƒ¡ãƒªãƒƒãƒˆãŒã‚ã‚‹ã®ã§ã—ã‚‡ã†ã‹ã€‚ãã¡ã‚“ã¨ç†è§£ã—ã¦ã„ãªã„ã®ã§ä»Šå›ã¯ã€TanStack Queryã«ã¤ã„ã¦èª¿ã¹ã¦ã¿ã¾ã™ã€‚

èª­ã¿è¿”ã—ã¦ã¿ãŸã‚‰ã€ä»Šå›ã®å†…å®¹ã¯ã‚ã‚“ã¾ã‚Šæ·±æ˜ã‚Šã¨ã¯è¨€ãˆãªã„ã®ã§å…¥é–€ã¨ã¤ã‘ã¦ã„ã¾ã™ã€‚

å…¬å¼ãƒšãƒ¼ã‚¸ã¯ã“ã¡ã‚‰

https://tanstack.com/query/latest

# çŠ¶æ…‹ç®¡ç†ã®åŸºç¤çŸ¥è­˜

TanStack Queryã‚’ç†è§£ã™ã‚‹å‰ã«ã€ã¾ãšã€ŒçŠ¶æ…‹ã€ã®ç¨®é¡ã«ã¤ã„ã¦æ•´ç†ã—ã¦ã¿ã¾ã™ã€‚React ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§æ‰±ã†ã€ŒçŠ¶æ…‹ã€ã¯ã€å¤§ããã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã¨ã‚µãƒ¼ãƒãƒ¼ã®ã‚¹ãƒ†ãƒ¼ãƒˆã®2ã¤ã«åˆ†é¡ã§ãã¾ã™ã€‚

```mermaid
graph TB
    subgraph ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚¹ãƒ†ãƒ¼ãƒˆ
        A[ãƒ¢ãƒ¼ãƒ€ãƒ«ã®é–‹é–‰]
        B[ç¾åœ¨ã®ã‚¿ãƒ–]
        C[ãƒ†ãƒ¼ãƒè¨­å®š]
    end

    subgraph ã‚µãƒ¼ãƒãƒ¼ã‚¹ãƒ†ãƒ¼ãƒˆ
        D[ãƒ¦ãƒ¼ã‚¶ãƒ¼ä¸€è¦§]
        E[å•†å“æƒ…å ±]
        F[æŠ•ç¨¿ãƒ‡ãƒ¼ã‚¿]
    end

    G[React ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³] --> A
    G --> B
    G --> C
    G -.APIçµŒç”±.-> D
    G -.APIçµŒç”±.-> E
    G -.APIçµŒç”±.-> F
```

## ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚¹ãƒ†ãƒ¼ãƒˆï¼ˆClient Stateï¼‰

ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å†…ã«å®Œå…¨ã«å­˜åœ¨ã™ã‚‹çŠ¶æ…‹ã§ã™ã€‚

```javascript
// ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚¹ãƒ†ãƒ¼ãƒˆã®ä¾‹
const [isModalOpen, setIsModalOpen] = useState(false);  // ãƒ¢ãƒ¼ãƒ€ãƒ«ã®é–‹é–‰çŠ¶æ…‹
const [currentTab, setCurrentTab] = useState('profile'); // ç¾åœ¨ã®ã‚¿ãƒ–
const [theme, setTheme] = useState('dark');              // ãƒ†ãƒ¼ãƒè¨­å®š
const [formInput, setFormInput] = useState('');          // ãƒ•ã‚©ãƒ¼ãƒ å…¥åŠ›å€¤
```

**ç‰¹å¾´**
- ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å†…ã§å®Œçµã—ã¦ã„ã‚‹
- åŒæœŸçš„ã«ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½
- äºˆæ¸¬å¯èƒ½ãªæ›´æ–°ãƒ‘ã‚¿ãƒ¼ãƒ³
- ä»–ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å½±éŸ¿ã‚’å—ã‘ãªã„

ã¡ãªã¿ã«ã€useStateã«ã¤ã„ã¦ã¯æ˜”åŒã˜ãZennå•ç­”ã§èª¿ã¹ãŸã®ã§ãƒªãƒ³ã‚¯ã‚’ã®ã›ã¾ã™ã€‚

https://zenn.dev/okaponta/articles/3744881e4cbe07

## ã‚µãƒ¼ãƒãƒ¼ã‚¹ãƒ†ãƒ¼ãƒˆï¼ˆServer Stateï¼‰

ã‚µãƒ¼ãƒãƒ¼ã«å­˜åœ¨ã—ã€ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆãŒå‚ç…§ã—ã¦ã„ã‚‹ã ã‘ã®çŠ¶æ…‹ã§ã™ã€‚

```javascript
// ã‚µãƒ¼ãƒãƒ¼ã‚¹ãƒ†ãƒ¼ãƒˆã®ä¾‹ï¼ˆå¾“æ¥ã®æ–¹æ³•ï¼‰
const [users, setUsers] = useState([]);
const [loading, setLoading] = useState(false);
const [error, setError] = useState(null);

useEffect(() => {
  setLoading(true);
  fetch('/api/users')
    .then(res => res.json())
    .then(data => {
      setUsers(data);
      setLoading(false);
    })
    .catch(err => {
      setError(err);
      setLoading(false);
    });
}, []);
```

**ç‰¹å¾´**
- ã‚µãƒ¼ãƒãƒ¼ã«å­˜åœ¨ã™ã‚‹
- éåŒæœŸAPIã§ã‚¢ã‚¯ã‚»ã‚¹ãŒå¿…è¦
- ä»–ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ã‚ˆã£ã¦å¤‰æ›´ã•ã‚Œã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹
- ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚„å†å–å¾—ã®ç®¡ç†ãŒå¿…è¦

# çŠ¶æ…‹ç®¡ç†ãƒ„ãƒ¼ãƒ«ã®æ­´å²

```mermaid
graph LR
    A[Redux 2015] --> B[Redux Toolkit 2019]
    A --> C[React Query 2019]
    C --> D[TanStack Query 2022]
    B --> E[ä½µç”¨ãƒ‘ã‚¿ãƒ¼ãƒ³]
    D --> E
```

## Reduxã®ç™»å ´

2015å¹´ã€ReduxãŒç™»å ´ã—ã¾ã—ãŸã€‚Facebook ãŒæå”±ã—ãŸ Flux ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã«åŸºã¥ã„ãŸäºˆæ¸¬å¯èƒ½ãªçŠ¶æ…‹ç®¡ç†ã‚’æä¾›ã—ã€React ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã§åºƒãæ¡ç”¨ã•ã‚Œã¾ã—ãŸã€‚

### Flux ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã¨ã¯

Flux ã¯ã€Facebook ãŒé–‹ç™ºã—ãŸ**å˜æ–¹å‘ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼**ã®ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ãƒ‘ã‚¿ãƒ¼ãƒ³ã§ã™ã€‚

å¾“æ¥ã®MVCï¼ˆModel-View-Controllerï¼‰ãƒ‘ã‚¿ãƒ¼ãƒ³ã§ã¯ã€è¤‡æ•°ã®ãƒ¢ãƒ‡ãƒ«ã¨è¤‡æ•°ã®ãƒ“ãƒ¥ãƒ¼ãŒåŒæ–¹å‘ã«å½±éŸ¿ã—åˆã„ã€ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼ãŒè¤‡é›‘ã«ãªã‚ŠãŒã¡ã§ã—ãŸã€‚ç‰¹ã«å¤§è¦æ¨¡ãªã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§ã¯ã€ã€Œã©ã“ã§çŠ¶æ…‹ãŒå¤‰æ›´ã•ã‚ŒãŸã®ã‹ã€ã‚’è¿½è·¡ã™ã‚‹ã“ã¨ãŒå›°é›£ã§ã—ãŸã€‚

Flux ã¯ã“ã®å•é¡Œã‚’è§£æ±ºã™ã‚‹ãŸã‚ã€**ä¸€æ–¹å‘ã®ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼**ã‚’å¼·åˆ¶ã—ã¾ã™ã€‚

```mermaid
graph LR
    A[Action] --> B[Dispatcher]
    B --> C[Store]
    C --> D[View]
    D --> A

    style A fill:#e1f5ff
    style B fill:#fff4e1
    style C fill:#e8f5e9
    style D fill:#f3e5f5
```

**Fluxã®4ã¤ã®è¦ç´ **

1. **Action** - ä½•ãŒèµ·ããŸã‹ã‚’è¡¨ã™ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ
2. **Dispatcher** - Actionã‚’ã™ã¹ã¦ã®Storeã«é…ä¿¡ã™ã‚‹ä¸­å¤®ãƒãƒ–
3. **Store** - ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®çŠ¶æ…‹ã¨ãƒ­ã‚¸ãƒƒã‚¯ã‚’ä¿æŒ
4. **View** - UIã‚’è¡¨ç¤ºã—ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æ“ä½œã‚’Actionã¨ã—ã¦ç™ºè¡Œ

**Reduxã¯ Flux ã®æ”¹è‰¯ç‰ˆ**

Redux ã¯ Flux ã®æ¦‚å¿µã‚’ç°¡ç´ åŒ–ã—ã€ä»¥ä¸‹ã®ã‚ˆã†ã«é€²åŒ–ã•ã›ã¾ã—ãŸã€‚

- **å˜ä¸€ã®Store** - Fluxã¯è¤‡æ•°ã®Storeã‚’æŒã¤ãŒã€Reduxã¯1ã¤ã ã‘
- **Dispatcherã®å‰Šé™¤** - StoreãŒç›´æ¥Actionã‚’å—ã‘å–ã‚‹
- **ç´”ç²‹é–¢æ•°ã®Reducer** - çŠ¶æ…‹ã®å¤‰æ›´æ–¹æ³•ã‚’äºˆæ¸¬å¯èƒ½ã«ã™ã‚‹

ã“ã®è¨­è¨ˆã«ã‚ˆã‚Šã€ã€ŒçŠ¶æ…‹ãŒã©ã®ã‚ˆã†ã«å¤‰åŒ–ã—ãŸã‹ã€ã‚’æ™‚ç³»åˆ—ã§è¿½è·¡ã§ãã‚‹**Time Travel Debugging**ãªã©ã®å¼·åŠ›ãªæ©Ÿèƒ½ãŒå®Ÿç¾ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚

```javascript
// Redux ã§ã®ã‚µãƒ¼ãƒãƒ¼ã‚¹ãƒ†ãƒ¼ãƒˆç®¡ç†ï¼ˆå¾“æ¥ã®æ–¹æ³•ï¼‰
// 1. Action Types
const FETCH_USERS_REQUEST = 'FETCH_USERS_REQUEST';
const FETCH_USERS_SUCCESS = 'FETCH_USERS_SUCCESS';
const FETCH_USERS_FAILURE = 'FETCH_USERS_FAILURE';

// 2. Action Creators
const fetchUsersRequest = () => ({ type: FETCH_USERS_REQUEST });
const fetchUsersSuccess = (users) => ({ type: FETCH_USERS_SUCCESS, payload: users });
const fetchUsersFailure = (error) => ({ type: FETCH_USERS_FAILURE, payload: error });

// 3. Thunk
const fetchUsers = () => async (dispatch) => {
  dispatch(fetchUsersRequest());
  try {
    const response = await fetch('/api/users');
    const data = await response.json();
    dispatch(fetchUsersSuccess(data));
  } catch (error) {
    dispatch(fetchUsersFailure(error));
  }
};

// 4. Reducer
const usersReducer = (state = initialState, action) => {
  switch (action.type) {
    case FETCH_USERS_REQUEST:
      return { ...state, loading: true, error: null };
    case FETCH_USERS_SUCCESS:
      return { ...state, loading: false, users: action.payload };
    case FETCH_USERS_FAILURE:
      return { ...state, loading: false, error: action.payload };
    default:
      return state;
  }
};

// 5. Component
function UserList() {
  const dispatch = useDispatch();
  const { users, loading, error } = useSelector(state => state.users);

  useEffect(() => {
    dispatch(fetchUsers());
  }, [dispatch]);

  // ...
}
```

ãŸã ã—ã€ã“ã®ã‚ˆã†ã«Reduxã§ã‚µãƒ¼ãƒãƒ¼ã‚¹ãƒ†ãƒ¼ãƒˆã‚’ç®¡ç†ã—ã‚ˆã†ã¨ã™ã‚‹ã¨ã€ã“ã®ã‚ˆã†ã«å¤§é‡ã®ã‚³ãƒ¼ãƒ‰ãŒå¿…è¦ã«ãªã‚Šã¾ã™ã€‚ã•ã‚‰ã«ã€ã‚­ãƒ£ãƒƒã‚·ãƒ¥ç®¡ç†ã‚„ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰æ›´æ–°ãªã©ã®æ©Ÿèƒ½ã¯å«ã¾ã‚Œã¦ãŠã‚‰ãšã€ã™ã¹ã¦æ‰‹å‹•ã§å®Ÿè£…ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã—ãŸã€‚

ãŸã—ã‹ã«ãªã‚“ã‹è¦‹è¦šãˆã‚ã‚Šã¾ã™ã€‚å½“æ™‚ã®è‡ªåˆ†ã¯ãã‚‚ãã‚‚ã†ã¾ãå‹•ã‹ã™ã®ã§ç²¾ä¸€æ¯ã ã£ãŸæ°—ãŒã—ã¾ã™ç¬‘

## Redux Toolkit ã®æ”¹å–„

2019å¹´ã€Redux ToolkitãŒç™»å ´ã—ã€Reduxã®ãƒœã‚¤ãƒ©ãƒ¼ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’å¤§å¹…ã«å‰Šæ¸›ã—ã¾ã—ãŸã€‚

### Redux Toolkitã®ã‚¢ãƒ—ãƒ­ãƒ¼ãƒ

Redux Toolkitã¯ã€å¾“æ¥ã®Reduxã®èª²é¡Œã‚’ä»¥ä¸‹ã®ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã§è§£æ±ºã—ã¾ã—ãŸã€‚

1. **createAsyncThunk** - éåŒæœŸå‡¦ç†ã‚’ç°¡æ½”ã«è¨˜è¿°
2. **createSlice** - Action Typesã¨Action Creatorsã‚’è‡ªå‹•ç”Ÿæˆ
3. **Immerã®çµ±åˆ** - ã‚¤ãƒŸãƒ¥ãƒ¼ã‚¿ãƒ–ãƒ«ãªæ›´æ–°ã‚’ç›´æ„Ÿçš„ã«è¨˜è¿°

```javascript
// Redux Toolkit ã§ã®æ”¹å–„ç‰ˆ
import { createSlice, createAsyncThunk } from '@reduxjs/toolkit';

// 1. createAsyncThunk ã§éåŒæœŸå‡¦ç†ã‚’å®šç¾©
//    pending/fulfilled/rejected ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãŒè‡ªå‹•ç”Ÿæˆã•ã‚Œã‚‹
export const fetchUsers = createAsyncThunk(
  'users/fetchUsers',
  async () => {
    const response = await fetch('/api/users');
    return response.json();
  }
);

// 2. createSlice ã§reducerã¨actionã‚’ä¸€ç®‡æ‰€ã§å®šç¾©
const usersSlice = createSlice({
  name: 'users',
  initialState: { users: [], loading: false, error: null },
  // 3. extraReducers ã§éåŒæœŸã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã«å¯¾å¿œ
  extraReducers: (builder) => {
    builder
      .addCase(fetchUsers.pending, (state) => {
        state.loading = true;  // Immerã®ãŠã‹ã’ã§ç›´æ¥æ›¸ãæ›ãˆã‚‰ã‚Œã‚‹
      })
      .addCase(fetchUsers.fulfilled, (state, action) => {
        state.loading = false;
        state.users = action.payload;
      })
      .addCase(fetchUsers.rejected, (state, action) => {
        state.loading = false;
        state.error = action.error.message;
      });
  },
});
```

### ä½•ãŒæ¥½ã«ãªã£ãŸã®ã‹

å¾“æ¥ã®Reduxã¨æ¯”è¼ƒã™ã‚‹ã¨ã€ä»¥ä¸‹ã®ã‚ˆã†ã«æ”¹å–„ã•ã‚Œã¾ã—ãŸã€‚

| é …ç›® | å¾“æ¥ã®Redux | Redux Toolkit |
|------|------------|---------------|
| Action Types | æ‰‹å‹•ã§å®šæ•°å®šç¾©ãŒå¿…è¦ | è‡ªå‹•ç”Ÿæˆ |
| Action Creators | æ‰‹å‹•ã§é–¢æ•°å®šç¾©ãŒå¿…è¦ | è‡ªå‹•ç”Ÿæˆ |
| éåŒæœŸå‡¦ç† | redux-thunkã‚’åˆ¥é€”è¨­å®š | createAsyncThunkã§å®Œçµ |
| Reducer | switchæ–‡ã§åˆ†å² | builderãƒ‘ã‚¿ãƒ¼ãƒ³ã§å‹å®‰å…¨ |
| ã‚¤ãƒŸãƒ¥ãƒ¼ã‚¿ãƒ–ãƒ«æ›´æ–° | ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰æ§‹æ–‡ã§æ‰‹å‹• | Immerã§ç›´æ¥æ›¸ãæ›ãˆå¯èƒ½ |
| ã‚³ãƒ¼ãƒ‰é‡ | 100è¡Œä»¥ä¸Š | 30ã€œ40è¡Œç¨‹åº¦ |

ç‰¹ã«ã€`FETCH_USERS_REQUEST`ã€`FETCH_USERS_SUCCESS`ã€`FETCH_USERS_FAILURE`ã¨ã„ã£ãŸå®šæ•°ã‚’æ‰‹å‹•ã§å®šç¾©ã™ã‚‹å¿…è¦ãŒãªããªã‚Šã€`createAsyncThunk`ãŒè‡ªå‹•çš„ã«`pending`ã€`fulfilled`ã€`rejected`ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’ç”Ÿæˆã—ã¦ãã‚Œã‚‹ã‚ˆã†ã«ãªã£ãŸã®ã¯å¤§ããªæ”¹å–„ã§ã™ã€‚

ã¾ãŸã€Immerã®çµ±åˆã«ã‚ˆã‚Šã€`return { ...state, loading: true }`ã®ã‚ˆã†ãªã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰æ§‹æ–‡ã§ã¯ãªãã€`state.loading = true`ã¨ç›´æ¥æ›¸ãæ›ãˆã‚‰ã‚Œã‚‹ã‚ˆã†ã«ãªã£ãŸã“ã¨ã§ã€ã‚³ãƒ¼ãƒ‰ãŒã‚ˆã‚Šç›´æ„Ÿçš„ã«ãªã‚Šã¾ã—ãŸã€‚

### ãã‚Œã§ã‚‚æ®‹ã‚‹èª²é¡Œ

Redux Toolkitã§ãƒœã‚¤ãƒ©ãƒ¼ãƒ—ãƒ¬ãƒ¼ãƒˆã¯æ¸›ã‚Šã¾ã—ãŸãŒã€ä¾ç„¶ã¨ã—ã¦ã‚µãƒ¼ãƒãƒ¼ã‚¹ãƒ†ãƒ¼ãƒˆç‰¹æœ‰ã®æ©Ÿèƒ½ã¯æ‰‹å‹•å®Ÿè£…ãŒå¿…è¦ã§ã—ãŸã€‚

- ã‚­ãƒ£ãƒƒã‚·ãƒ¥ç®¡ç†
- ãƒ‡ãƒ¼ã‚¿ã®è‡ªå‹•å†å–å¾—
- ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰æ›´æ–°
- é‡è¤‡ãƒªã‚¯ã‚¨ã‚¹ãƒˆã®é˜²æ­¢
- æ¥½è¦³çš„æ›´æ–°

ã“ã‚Œã‚‰ã®æ©Ÿèƒ½ã‚’å®Ÿè£…ã—ã‚ˆã†ã¨ã™ã‚‹ã¨ã€çµå±€ã¾ãŸè¤‡é›‘ãªã‚³ãƒ¼ãƒ‰ãŒå¿…è¦ã«ãªã£ã¦ã—ã¾ã„ã¾ã™ã€‚

## React Query (TanStack Query) ã®èª•ç”Ÿ

2019å¹´ã€Tanner Linsleyæ°ã«ã‚ˆã£ã¦React QueryãŒé–‹ç™ºã•ã‚Œã¾ã—ãŸã€‚ã“ã‚Œã¯**ã‚µãƒ¼ãƒãƒ¼ã‚¹ãƒ†ãƒ¼ãƒˆç®¡ç†ã«ç‰¹åŒ–**ã—ãŸå…¨ãæ–°ã—ã„ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã§ã—ãŸã€‚

2022å¹´ã€Reactä»¥å¤–ã®ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ï¼ˆVueã€Solidã€Svelteãªã©ï¼‰ã«ã‚‚å¯¾å¿œã™ã‚‹ãŸã‚ã€ã€ŒTanStack Queryã€ã«ãƒªãƒ–ãƒ©ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ã•ã‚Œã¾ã—ãŸã€‚ã€ŒTanStackã€ã¨ã„ã†åå‰ã¯ã€ä½œè€…ã®Tanner Linsleyæ°ã®åå‰ï¼ˆTanï¼‰ã¨ã€å½¼ãŒé–‹ç™ºã™ã‚‹ä¸€é€£ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªç¾¤ï¼ˆStackï¼‰ã‚’çµ„ã¿åˆã‚ã›ãŸã‚‚ã®ã§ã™ã€‚

# TanStack Query ã¨ã¯

TanStack Queryã¯ã€ã‚µãƒ¼ãƒãƒ¼ã‚¹ãƒ†ãƒ¼ãƒˆç®¡ç†ã«ç‰¹åŒ–ã—ãŸãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã™ã€‚ã€Œãƒ‡ãƒ¼ã‚¿å–å¾—ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã€ã¨ã‚‚å‘¼ã°ã‚Œã¾ã™ãŒã€ãã®æœ¬è³ªã¯**ã‚µãƒ¼ãƒãƒ¼ã‚¹ãƒ†ãƒ¼ãƒˆã®ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ç®¡ç†**ã«ã‚ã‚Šã¾ã™ã€‚

## åŸºæœ¬çš„ãªä½¿ã„æ–¹

åŒã˜ãƒ¦ãƒ¼ã‚¶ãƒ¼ä¸€è¦§å–å¾—ã‚’ã€TanStack Queryã§å®Ÿè£…ã™ã‚‹ã¨ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

```javascript
import { useQuery } from '@tanstack/react-query';

function UserList() {
  const { data, isLoading, error, refetch } = useQuery({
    queryKey: ['users'],
    queryFn: async () => {
      const response = await fetch('/api/users');
      return response.json();
    },
  });

  if (isLoading) return <div>èª­ã¿è¾¼ã¿ä¸­...</div>;
  if (error) return <div>ã‚¨ãƒ©ãƒ¼: {error.message}</div>;

  return (
    <div>
      {data.map(user => (
        <div key={user.id}>{user.name}</div>
      ))}
      <button onClick={() => refetch()}>å†èª­ã¿è¾¼ã¿</button>
    </div>
  );
}
```

**ã‚ãšã‹5è¡Œã§å®Ÿç¾ã§ãã‚‹ã“ã¨**
- è‡ªå‹•ã‚­ãƒ£ãƒƒã‚·ãƒ¥
- ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°çŠ¶æ…‹ç®¡ç†
- ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
- å†å–å¾—æ©Ÿèƒ½
- ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰æ›´æ–°

## Redux ã¨ã®æ¯”è¼ƒ

| è¦³ç‚¹ | Redux | TanStack Query |
|------|-------|----------------|
| ä¸»ãªç”¨é€” | ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚¹ãƒ†ãƒ¼ãƒˆç®¡ç† | ã‚µãƒ¼ãƒãƒ¼ã‚¹ãƒ†ãƒ¼ãƒˆç®¡ç† |
| ãƒœã‚¤ãƒ©ãƒ¼ãƒ—ãƒ¬ãƒ¼ãƒˆ | å¤šã„ï¼ˆ100è¡Œä»¥ä¸Šï¼‰ | å°‘ãªã„ï¼ˆ5è¡Œç¨‹åº¦ï¼‰ |
| ã‚­ãƒ£ãƒƒã‚·ãƒ¥æ©Ÿèƒ½ | æ‰‹å‹•å®Ÿè£…ãŒå¿…è¦ | è‡ªå‹• |
| ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰æ›´æ–° | æ‰‹å‹•å®Ÿè£…ãŒå¿…è¦ | è‡ªå‹• |
| é©ç”¨ç¯„å›² | ã‚°ãƒ­ãƒ¼ãƒãƒ«ãªçŠ¶æ…‹å…¨èˆ¬ | API ãƒ‡ãƒ¼ã‚¿å–å¾— |

## ãƒ‡ãƒ¼ã‚¿æ›´æ–°ï¼ˆMutationï¼‰

ãƒ‡ãƒ¼ã‚¿ã®ä½œæˆãƒ»æ›´æ–°ãƒ»å‰Šé™¤ã«ã¯useMutationã‚’ä½¿ç”¨ã—ã¾ã™ã€‚

```javascript
import { useMutation, useQueryClient } from '@tanstack/react-query';

function CreateUser() {
  const queryClient = useQueryClient();

  const mutation = useMutation({
    mutationFn: async (newUser) => {
      const response = await fetch('/api/users', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(newUser),
      });
      return response.json();
    },
    onSuccess: () => {
      // ãƒ¦ãƒ¼ã‚¶ãƒ¼ä¸€è¦§ã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’ç„¡åŠ¹åŒ–ã—ã¦å†å–å¾—
      queryClient.invalidateQueries({ queryKey: ['users'] });
    },
  });

  const handleSubmit = (e) => {
    e.preventDefault();
    mutation.mutate({ name: 'New User' });
  };

  return (
    <form onSubmit={handleSubmit}>
      <button type="submit" disabled={mutation.isPending}>
        {mutation.isPending ? 'ä½œæˆä¸­...' : 'ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½œæˆ'}
      </button>
      {mutation.isError && <div>ã‚¨ãƒ©ãƒ¼: {mutation.error.message}</div>}
      {mutation.isSuccess && <div>ä½œæˆæˆåŠŸ!</div>}
    </form>
  );
}
```

# TanStack Query ã®ä»•çµ„ã¿

TanStack Queryã¯ã€**Stale-While-Revalidate (SWR)** ã¨ã„ã†ã‚­ãƒ£ãƒƒã‚·ãƒ¥æˆ¦ç•¥ã‚’ã‚‚ã¨ã«è¨­è¨ˆã•ã‚Œã¦ã„ã‚‹ã¿ãŸã„ã§ã™ã€‚

## Stale-While-Revalidate ãƒ‘ã‚¿ãƒ¼ãƒ³

```mermaid
sequenceDiagram
    participant Component as ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
    participant Query as TanStack Query
    participant Cache as ã‚­ãƒ£ãƒƒã‚·ãƒ¥
    participant API as ã‚µãƒ¼ãƒãƒ¼

    Note over Component,API: åˆå›ã‚¢ã‚¯ã‚»ã‚¹
    Component->>Query: useQuery(['users'])
    Query->>Cache: ã‚­ãƒ£ãƒƒã‚·ãƒ¥ç¢ºèª
    Cache-->>Query: ãªã—
    Query->>API: ãƒ‡ãƒ¼ã‚¿å–å¾—
    API-->>Query: ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ‡ãƒ¼ã‚¿
    Query->>Cache: ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã«ä¿å­˜
    Query-->>Component: ãƒ‡ãƒ¼ã‚¿è¿”å´

    Note over Component,API: 2å›ç›®ã®ã‚¢ã‚¯ã‚»ã‚¹ï¼ˆfreshçŠ¶æ…‹ï¼‰
    Component->>Query: useQuery(['users'])
    Query->>Cache: ã‚­ãƒ£ãƒƒã‚·ãƒ¥ç¢ºèª
    Cache-->>Query: ã‚ã‚Šï¼ˆfreshï¼‰
    Query-->>Component: ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ‡ãƒ¼ã‚¿è¿”å´

    Note over Component,API: 3å›ç›®ã®ã‚¢ã‚¯ã‚»ã‚¹ï¼ˆstaleçŠ¶æ…‹ï¼‰
    Component->>Query: useQuery(['users'])
    Query->>Cache: ã‚­ãƒ£ãƒƒã‚·ãƒ¥ç¢ºèª
    Cache-->>Query: ã‚ã‚Šï¼ˆstaleï¼‰
    Query-->>Component: ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ‡ãƒ¼ã‚¿å³åº§ã«è¿”å´
    Query->>API: ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ã§å†å–å¾—
    API-->>Query: æœ€æ–°ãƒ‡ãƒ¼ã‚¿
    Query->>Cache: ã‚­ãƒ£ãƒƒã‚·ãƒ¥æ›´æ–°
    Query-->>Component: æœ€æ–°ãƒ‡ãƒ¼ã‚¿ã§å†ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°
```

# useQueryã®ä¸»è¦ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ä¸€è¦§

TanStack Queryã‚’åŠ¹æœçš„ã«ä½¿ã†ãŸã‚ã«ã€useQueryã®ä¸»è¦ãªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’ç†è§£ã—ã¦ãŠãã¾ã™ã€‚

## å¿…é ˆãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿

### queryKey

ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’è­˜åˆ¥ã™ã‚‹ãŸã‚ã®ä¸€æ„ãªã‚­ãƒ¼ã§ã™ã€‚

```javascript
// æ–‡å­—åˆ—ã®é…åˆ—
queryKey: ['users']

// IDã‚’å«ã‚€
queryKey: ['user', userId]

// ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’å«ã‚€ï¼ˆè‡ªå‹•çš„ã«ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºã•ã‚Œã‚‹ï¼‰
queryKey: ['users', { status: 'active', page: 1 }]
```

**é‡è¦ãªç‰¹æ€§**
- queryKeyãŒå¤‰ã‚ã‚‹ã¨ã€æ–°ã—ã„ã‚¯ã‚¨ãƒªã¨ã—ã¦æ‰±ã‚ã‚Œè‡ªå‹•çš„ã«å†å–å¾—ã•ã‚Œã‚‹
- é…åˆ—ã®è¦ç´ ãŒ1ã¤ã§ã‚‚ç•°ãªã‚Œã°ã€åˆ¥ã®ã‚¯ã‚¨ãƒªã¨ã—ã¦èªè­˜ã•ã‚Œã‚‹
- ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¯æ·±ã„æ¯”è¼ƒãŒè¡Œã‚ã‚Œã‚‹

### queryFn

ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã™ã‚‹éåŒæœŸé–¢æ•°ã§ã™ã€‚

```javascript
// ã‚·ãƒ³ãƒ—ãƒ«ãªä¾‹
queryFn: () => fetch('/api/users').then(res => res.json())

// å¼•æ•°ã‚’ä½¿ã†ä¾‹
queryFn: async ({ queryKey }) => {
  const [_key, userId] = queryKey;
  const response = await fetch(`/api/users/${userId}`);
  return response.json();
}
```

## ã‚­ãƒ£ãƒƒã‚·ãƒ¥åˆ¶å¾¡ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿

### staleTime (ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: 0)

ãƒ‡ãƒ¼ã‚¿ãŒã€Œæ–°é®®ã€ã¨ã¿ãªã•ã‚Œã‚‹æ™‚é–“ï¼ˆãƒŸãƒªç§’ï¼‰

```javascript
staleTime: 5 * 60 * 1000  // 5åˆ†é–“ã¯å†å–å¾—ã—ãªã„
staleTime: Infinity       // æ°¸é ã«æ–°é®®ï¼ˆæ‰‹å‹•æ›´æ–°ã¾ã§å†å–å¾—ã—ãªã„ï¼‰
```

### gcTime (ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: 5åˆ†)

ä½¿ã‚ã‚Œãªããªã£ãŸã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’ä¿æŒã™ã‚‹æ™‚é–“ï¼ˆãƒŸãƒªç§’ï¼‰

```javascript
gcTime: 10 * 60 * 1000  // 10åˆ†é–“ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’ä¿æŒ
gcTime: Infinity        // æ°¸é ã«ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’ä¿æŒ
```

## è‡ªå‹•å†å–å¾—ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿

### refetchOnWindowFocus (ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: true)

ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ãŒãƒ•ã‚©ãƒ¼ã‚«ã‚¹ã•ã‚ŒãŸæ™‚ã«å†å–å¾—ã™ã‚‹ã‹ã©ã†ã‹

```javascript
refetchOnWindowFocus: true   // ã‚¿ãƒ–ã«æˆ»ã£ãŸæ™‚ã«æœ€æ–°ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—
refetchOnWindowFocus: false  // ãƒ•ã‚©ãƒ¼ã‚«ã‚¹æ™‚ã¯å†å–å¾—ã—ãªã„
```

### refetchOnMount (ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: true)

ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒãƒã‚¦ãƒ³ãƒˆã•ã‚ŒãŸæ™‚ã«å†å–å¾—ã™ã‚‹ã‹ã©ã†ã‹

```javascript
refetchOnMount: true      // ãƒã‚¦ãƒ³ãƒˆæ™‚ã«å¸¸ã«å†å–å¾—
refetchOnMount: false     // ãƒã‚¦ãƒ³ãƒˆæ™‚ã¯å†å–å¾—ã—ãªã„
refetchOnMount: 'always'  // staleã‹ã©ã†ã‹ã«é–¢ã‚ã‚‰ãšå¸¸ã«å†å–å¾—
```

### refetchOnReconnect (ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: true)

ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ãŒå†æ¥ç¶šã•ã‚ŒãŸæ™‚ã«å†å–å¾—ã™ã‚‹ã‹ã©ã†ã‹

```javascript
refetchOnReconnect: true  // å†æ¥ç¶šæ™‚ã«æœ€æ–°ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—
```

### refetchInterval

å®šæœŸçš„ã«ãƒ‡ãƒ¼ã‚¿ã‚’å†å–å¾—ã™ã‚‹é–“éš”ï¼ˆãƒŸãƒªç§’ï¼‰

```javascript
refetchInterval: 10000  // 10ç§’ã”ã¨ã«å†å–å¾—ï¼ˆãƒãƒ¼ãƒªãƒ³ã‚°ï¼‰
refetchInterval: false  // ãƒãƒ¼ãƒªãƒ³ã‚°ã—ãªã„ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼‰
```

## æ¡ä»¶ä»˜ãå®Ÿè¡Œãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿

### enabled

ã‚¯ã‚¨ãƒªã‚’å®Ÿè¡Œã™ã‚‹ã‹ã©ã†ã‹ã®æ¡ä»¶

```javascript
// ãƒ¦ãƒ¼ã‚¶ãƒ¼IDãŒå­˜åœ¨ã™ã‚‹å ´åˆã®ã¿å®Ÿè¡Œ
enabled: !!userId

// è¤‡æ•°ã®æ¡ä»¶
enabled: isLoggedIn && hasPermission
```

**ä½¿ç”¨ä¾‹**

```javascript
function UserProfile({ userId }) {
  const { data } = useQuery({
    queryKey: ['user', userId],
    queryFn: () => fetchUser(userId),
    enabled: !!userId,  // userIdãŒã‚ã‚‹æ™‚ã ã‘å®Ÿè¡Œ
  });
}
```

## ãƒªãƒˆãƒ©ã‚¤ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿

### retry (ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: 3)

å¤±æ•—æ™‚ã®ãƒªãƒˆãƒ©ã‚¤å›æ•°

```javascript
retry: 3           // 3å›ã¾ã§ãƒªãƒˆãƒ©ã‚¤
retry: false       // ãƒªãƒˆãƒ©ã‚¤ã—ãªã„
retry: (failureCount, error) => {
  // ã‚«ã‚¹ã‚¿ãƒ ãƒ­ã‚¸ãƒƒã‚¯
  return failureCount < 5 && error.status !== 404;
}
```

### retryDelay

ãƒªãƒˆãƒ©ã‚¤ã¾ã§ã®å¾…æ©Ÿæ™‚é–“ã‚’è¨ˆç®—ã™ã‚‹é–¢æ•°

```javascript
retryDelay: attemptIndex => Math.min(1000 * 2 ** attemptIndex, 30000)
// 1ç§’ â†’ 2ç§’ â†’ 4ç§’ â†’ 8ç§’ â†’ ... æœ€å¤§30ç§’
```

## ãã®ä»–ã®ä¾¿åˆ©ãªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿

### placeholderData

ãƒ‡ãƒ¼ã‚¿ãŒå–å¾—ã•ã‚Œã‚‹ã¾ã§ã®é–“ã«è¡¨ç¤ºã™ã‚‹ä»®ãƒ‡ãƒ¼ã‚¿

```javascript
placeholderData: {
  users: [],
  total: 0,
}
```

### keepPreviousData

æ–°ã—ã„ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ä¸­ã‚‚å‰ã®ãƒ‡ãƒ¼ã‚¿ã‚’ä¿æŒã™ã‚‹ï¼ˆãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³ã«ä¾¿åˆ©ï¼‰

```javascript
keepPreviousData: true
```

### select

å–å¾—ã—ãŸãƒ‡ãƒ¼ã‚¿ã‚’å¤‰æ›ã™ã‚‹

```javascript
select: (data) => data.users.map(user => user.name)
```

## ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®çµ„ã¿åˆã‚ã›ä¾‹

### ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰

```javascript
useQuery({
  queryKey: ['dashboard'],
  queryFn: fetchDashboard,
  staleTime: 0,                    // å¸¸ã«staleæ‰±ã„
  refetchInterval: 5000,           // 5ç§’ã”ã¨ã«æ›´æ–°
  refetchOnWindowFocus: true,      // ãƒ•ã‚©ãƒ¼ã‚«ã‚¹æ™‚ã‚‚æ›´æ–°
  refetchOnReconnect: true,        // å†æ¥ç¶šæ™‚ã‚‚æ›´æ–°
});
```

### ã»ã¨ã‚“ã©å¤‰ã‚ã‚‰ãªã„ãƒã‚¹ã‚¿ãƒ¼ãƒ‡ãƒ¼ã‚¿

```javascript
useQuery({
  queryKey: ['countries'],
  queryFn: fetchCountries,
  staleTime: Infinity,             // æ°¸é ã«æ–°é®®
  gcTime: Infinity,                // æ°¸é ã«ã‚­ãƒ£ãƒƒã‚·ãƒ¥
  refetchOnWindowFocus: false,     // ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ã§ã¯æ›´æ–°ã—ãªã„
  refetchOnMount: false,           // ãƒã‚¦ãƒ³ãƒˆã§ã¯æ›´æ–°ã—ãªã„
});
```

### æ¡ä»¶ä»˜ãã§å®Ÿè¡Œã™ã‚‹ã‚¯ã‚¨ãƒª

```javascript
useQuery({
  queryKey: ['userPosts', userId],
  queryFn: () => fetchUserPosts(userId),
  enabled: !!userId,               // userIdãŒã‚ã‚‹æ™‚ã ã‘å®Ÿè¡Œ
  retry: 2,                        // 2å›ã¾ã§ãƒªãƒˆãƒ©ã‚¤
  staleTime: 60 * 1000,           // 1åˆ†é–“ã¯æ–°é®®
});
```

# ã¾ã¨ã‚

ä»Šå›ã¯TanStack Queryã«ã¤ã„ã¦èª¿ã¹ã¦ã¿ã¾ã—ãŸã€‚èª¿ã¹ãŸã¨ã¯ã„ãˆã¾ã å®Ÿè·µã§ä½¿ãˆã¦ã„ãªã„ã®ã§ã€ã¾ãŸè§£åƒåº¦ãŒä¸ŠãŒã£ã¦ã‹ã‚‰ãã¡ã‚“ã¨ã—ãŸZennå•ç­”ãŒã§ãã‚‹ã‹ãªã¨æ€ã£ã¦ã„ã¾ã™ã€‚ä»Šå›ã¯æœ¬å½“ã«ã•ã‚ã‚Šã ã‘ãƒ»ãƒ»ãƒ»

TanStackã¯ã‚µãƒ¼ãƒãƒ¼ã‚¹ãƒ†ãƒ¼ãƒˆã«çš„ã‚’çµã‚‹ã“ã¨ã§è¨˜æ³•ãŒä¸€æ°—ã«ç°¡æ½”ã«ã§ããŸã®ã‹ãªã¨ã„ã†å°è±¡ã‚’å—ã‘ã¾ã—ãŸã€‚ã‚ˆãåºƒã¾ã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¯ã‚„ã¯ã‚Šã‚·ãƒ³ãƒ—ãƒ«ãªã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ãŒå¤§äº‹ãªã‚“ã ãªã¨æ”¹ã‚ã¦æ€ã„ã¾ã—ãŸã€‚

æœ€å¾Œã¾ã§èª­ã‚“ã§ã„ãŸã ãã€ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã—ãŸğŸ™
